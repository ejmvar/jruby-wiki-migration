{"href":"https://kenai.com/api/projects/jruby/features/wiki/pages/JRubyOnWebStart/revisions/2.json","name":"JRubyOnWebStart","number":2,"page_href":"https://kenai.com/api/projects/jruby/features/wiki/pages/JRubyOnWebStart.json","person":"john_brock","description":"","text":"__TOC__\r\n\r\n==Deploying JRuby applications with [http://java.sun.com/j2se/1.5.0/docs/guide/javaws// Java Web Start]==\r\n\r\n===Known Issues===\r\n[http://jira.codehaus.org/secure/IssueNavigator.jspa?reset=true&query=%22web+start%22+%7C%7C+jnlp+%7C%7C+webstart+%7C%7C+javaws&summary=true&description=true&body=true&pid=11295&status=1&status=3 Open JIRA Issues matching \"Web Start or jnlp or javaws\"]\r\n\r\n===Samples===\r\nThe samples directory distributed with JRuby (as of Dec 29 2007 this sample is only on the subversion trunk version of JRuby) has an example jnlp, [http://svn.codehaus.org/jruby/trunk/jruby/samples/jirb.jnlp/ jirb.jnlp] which will start the JRuby Swing IRB console as a Java Web Start application. \r\n\r\n====Getting jirb.jnlp sample to work in Java 1.5====\r\nThe [http://svn.codehaus.org/jruby/trunk/jruby/samples/jirb.jnlp/ jirb.jnlp] needs to be modified to work on Java 1.5 because of the use of \"..\" in the codebase attribute which only works in Java 1.6.\r\n1. make a symbolic link to the directory $JRUBY_HOME/lib in the samples directory (or make a copy of the lib directory).\r\n  $ cd $JRUBY_HOME/samples\r\n  $ ln -s ../lib\r\n2, change the codebase attribute in the jnlp element to use a reference to the local directory\r\n  &lt;jnlp spec=\"1.0+\" codebase=\"file:.\"&gt;\r\n3. start the jnlp using javaws from the command line\r\n  $ javaws jirb.jnlp\r\n\r\n====New jnlp samples dir====\r\nThis Jira issue:\r\n* [http://jira.codehaus.org/browse/JRUBY-2040 JRUBY-2040: new samples/jnlp dir: includes both unsigned and signed examples that work in Java 1.5 and 1.6]\r\nincludes an attachment which when extracted in samples/ adds s both unsigned and signed examples that work in Java 1.5 and 1.6. It is projected to be included in JRUBY 1.1 RC2.\r\n\r\n===JAR Signing===\r\nIf you're getting an <tt>java.securityAccessControlException</tt> with the message <tt>access denied (java.lang.RuntimePermission accessDeclaredMembers)</tt> on startup or when running your JRuby application, then you'll need to sign your jar. The whole process is described \r\n[http://java.sun.com/products/javawebstart/1.2/docs/developersguide.html#dev here], under \"Signing JAR Files with a Test Certificate\". You basically have to perform the following steps:\r\n\r\n keytool -genkey -keystore myKeystore -alias myself\r\n keytool -selfcert -alias myself -keystore myKeystore\r\n\r\nYou also need to include to following lines in your jnlp-file:\r\n <security> \r\n   <all-permissions/> \r\n </security>\r\n\r\nAnd whenever you modify the jar, you need to do an\r\n\r\n jarsigner -keystore myKeystore test.jar myself\r\n\r\nto update the signature.\r\n\r\n===Disabling the Security Manager===\r\nIf you have a signed jar and the startup fails because of an <tt>java.lang.reflect.ReflectPermission</tt> or you continue to have <tt>access denied (java.lang.RuntimePermission accessDeclaredMembers)</tt> errors, you can just disable the security manager:\r\n\r\nJRuby:\r\n java.lang.System.setSecurityManager(nil)\r\nJava:\r\n System.setSecurityManager(null);\r\nDisclaimer: I'm not an expert on Java Security, so I don't know if disabling the Security Manager has unintended sideeffects. [[User:Mstocker|Mstocker]] 10:49, 30 December 2007 (PST)\r\n\r\nSee: [http://jira.codehaus.org/browse/JRUBY-1821/ JRUBY-1821] and [http://jira.codehaus.org/browse/JRUBY-1782/ JRUBY-1782].\r\n","created_at":"2008-08-12T19:44:35Z","content_type":"application/vnd.com.kenai.page.revision+json"}