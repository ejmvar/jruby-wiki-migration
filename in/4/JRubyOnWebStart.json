{"href":"https://kenai.com/api/projects/jruby/features/wiki/pages/JRubyOnWebStart/revisions/4.json","name":"JRubyOnWebStart","number":4,"page_href":"https://kenai.com/api/projects/jruby/features/wiki/pages/JRubyOnWebStart.json","person":"pfussell","description":"Moved title to top, added link to home page, minor edits ","text":"[[Home|&raquo; JRuby Project Wiki Home Page]]\n=Deploying JRuby applications with [http://java.sun.com/j2se/1.5.0/docs/guide/javaws// Java Web Start]=\n__TOC__\n===Known Issues===\n[http://jira.codehaus.org/secure/IssueNavigator.jspa?reset=true&query=%22web+start%22+%7C%7C+jnlp+%7C%7C+webstart+%7C%7C+javaws&summary=true&description=true&body=true&pid=11295&status=1&status=3 Open JIRA Issues matching \"Web Start or jnlp or javaws\"]\n\n===Samples===\nThe samples directory distributed with JRuby (as of Dec 29 2007 this sample is only on the subversion trunk version of JRuby) has an example jnlp, [http://svn.codehaus.org/jruby/trunk/jruby/samples/jirb.jnlp/ jirb.jnlp] that will start the JRuby Swing IRB console as a Java Web Start application. \n\n====Getting jirb.jnlp sample to work in Java 1.5====\nThe [http://svn.codehaus.org/jruby/trunk/jruby/samples/jirb.jnlp/ jirb.jnlp] needs to be modified to work on Java 1.5 because of the use of <tt>..</tt> in the codebase attribute, which only works in Java 1.6.\n# Make a symbolic link to the directory <tt>$JRUBY_HOME/lib</tt> in the samples directory (or make a copy of the lib directory).<br/><tt> &nbsp; $ cd $JRUBY_HOME/samples<br/> &nbsp; $ ln -s ../lib</tt>\n# Change the codebase attribute in the jnlp element to use a reference to the local directory.<br/><tt> &nbsp; &lt;jnlp spec=\"1.0+\" codebase=\"file:.\"&gt;</tt>\n# Start the jnlp using javaws from the command line. <br/><tt> &nbsp; $ javaws jirb.jnlp</tt>\n\n====New jnlp samples dir====\nThe following Jira issue includes an attachment that, when extracted in <tt>samples/</tt> adds both unsigned and signed examples that work in Java 1.5 and 1.6. It is projected to be included in JRUBY 1.1 RC2.\n* [http://jira.codehaus.org/browse/JRUBY-2040 JRUBY-2040: new samples/jnlp dir: includes both unsigned and signed examples that work in Java 1.5 and 1.6]\n\n===JAR Signing===\nIf you're getting <tt>java.securityAccessControlException</tt> with the message <tt>access denied (java.lang.RuntimePermission accessDeclaredMembers)</tt> on startup or when running your JRuby application, then you need to sign your jar. The whole process is described \n[http://java.sun.com/products/javawebstart/1.2/docs/developersguide.html#dev here], under \"Signing JAR Files with a Test Certificate\". \n\nYou basically have to perform the following steps:\n\n keytool -genkey -keystore myKeystore -alias myself\n keytool -selfcert -alias myself -keystore myKeystore\n\nYou also need to include to following lines in your jnlp-file:\n &lt;security&gt; \n   &lt;all-permissions/&gt; \n &lt;/security&gt;\n\nWhenever you modify the jar, you need to do the following to update the signature:\n jarsigner -keystore myKeystore test.jar myself\n\n===Disabling the Security Manager===\nIf you have a signed jar and the startup fails because of a <tt>java.lang.reflect.ReflectPermission</tt>, or you continue to have <tt>access denied (java.lang.RuntimePermission accessDeclaredMembers)</tt> errors, you can just disable the security manager.\n\n'''Using JRuby:'''\n java.lang.System.setSecurityManager(nil)\n'''Using Java:'''\n System.setSecurityManager(null);\nDisclaimer: I'm not an expert on Java Security, so I don't know if disabling the Security Manager has unintended side effects. <nowiki>[User:Mstocker|Mstocker]</nowiki> 10:49, 30 December 2007 (PST)\n\nSee: [http://jira.codehaus.org/browse/JRUBY-1821/ JRUBY-1821] and [http://jira.codehaus.org/browse/JRUBY-1782/ JRUBY-1782].\n","created_at":"2009-06-19T23:50:50Z","content_type":"application/vnd.com.kenai.page.revision+json"}