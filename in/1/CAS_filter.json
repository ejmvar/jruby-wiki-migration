{"href":"https://kenai.com/api/projects/jruby/features/wiki/pages/CAS_filter/revisions/1.json","name":"CAS_filter","number":1,"page_href":"https://kenai.com/api/projects/jruby/features/wiki/pages/CAS_filter.json","person":"looselytyped","description":"","text":"= How to use a servlet filter =\n\nYou can use servlet filters in your rails-in-a-war-file applications. This page shows you how to use [http://www.ja-sig.org/products/cas/client/javaclient/ Yale's CAS-filter] but you should be able to use other filters as well. \n\n1. Add the necessary dependencies in config/war.rb\n\n      maven_library 'cas', 'casclient', '2.1.1'\n      maven_library 'commons-logging', 'commons-logging', '1.1'\n\n2. Add your filter configuration to the web.xml template in [http://viewvc.rubyforge.mmmultiworks.com/cgi/viewvc.cgi/trunk/rails-integration/plugins/war/lib/create_war.rb?root=jruby-extras&view=markup vendor/plugins/war/lib/create_war.rb] (the web.xml file is regenerated from this template each time you create the war-file). The xml is embedded in the ruby code, search for \"def create_webxml\".\n<pre>\n      <filter>\n        <filter-name>CAS Filter</filter-name>\n        <filter-class>edu.yale.its.tp.cas.client.filter.CASFilter</filter-class>\n        <init-param>\n          <param-name>edu.yale.its.tp.cas.client.filter.loginUrl</param-name>\n          <param-value>https://secure.its.yale.edu/cas/login</param-value>\n        </init-param>\n        <init-param>\n          <param-name>edu.yale.its.tp.cas.client.filter.validateUrl</param-name>\n          <param-value>https://secure.its.yale.edu/cas/serviceValidate</param-value>\n        </init-param>\n        <init-param>\n          <param-name>edu.yale.its.tp.cas.client.filter.serverName</param-name>\n          <param-value>your server name and port (e.g., www.yale.edu:8080)</param-value>\n        </init-param>\n      </filter>\n      \n      <filter-mapping>\n        <filter-name>CAS Filter</filter-name>\n        <url-pattern>/requires-cas-authetication/*</url-pattern>\n      </filter-mapping>\n</pre>\n3. If you're CAS server use a certificate that has not been signed by a root-ca you need to make the certificate available to your application server. If you use Tomcat you can do this by getting the certificate into a keystore [http://blogs.sun.com/andreas/entry/no_more_unable_to_find] and startup tomcat like this\n\n      startup.bat -Djavax.net.ssl.trustStore=C:/path/to/my/keystore -Djavax.net.ssl.trustStorePassword=changeit\n","created_at":"2009-03-24T22:59:34Z","content_type":"application/vnd.com.kenai.page.revision+json"}