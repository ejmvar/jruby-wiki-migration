{"href":"https://kenai.com/api/projects/jruby/features/wiki/pages/JRubyOnWebStart/revisions/3.json","name":"JRubyOnWebStart","number":3,"page_href":"https://kenai.com/api/projects/jruby/features/wiki/pages/JRubyOnWebStart.json","person":"headius","description":"","text":"__TOC__\n\n==Deploying JRuby applications with [http://java.sun.com/j2se/1.5.0/docs/guide/javaws// Java Web Start]==\n\n===Known Issues===\n[http://jira.codehaus.org/secure/IssueNavigator.jspa?reset=true&query=%22web+start%22+%7C%7C+jnlp+%7C%7C+webstart+%7C%7C+javaws&summary=true&description=true&body=true&pid=11295&status=1&status=3 Open JIRA Issues matching \"Web Start or jnlp or javaws\"]\n\n===Samples===\nThe samples directory distributed with JRuby (as of Dec 29 2007 this sample is only on the subversion trunk version of JRuby) has an example jnlp, [http://svn.codehaus.org/jruby/trunk/jruby/samples/jirb.jnlp/ jirb.jnlp] which will start the JRuby Swing IRB console as a Java Web Start application. \n\n====Getting jirb.jnlp sample to work in Java 1.5====\nThe [http://svn.codehaus.org/jruby/trunk/jruby/samples/jirb.jnlp/ jirb.jnlp] needs to be modified to work on Java 1.5 because of the use of \"..\" in the codebase attribute which only works in Java 1.6.\n1. make a symbolic link to the directory $JRUBY_HOME/lib in the samples directory (or make a copy of the lib directory).\n  $ cd $JRUBY_HOME/samples\n  $ ln -s ../lib\n2, change the codebase attribute in the jnlp element to use a reference to the local directory\n  &lt;jnlp spec=\"1.0+\" codebase=\"file:.\"&gt;\n3. start the jnlp using javaws from the command line\n  $ javaws jirb.jnlp\n\n====New jnlp samples dir====\nThis Jira issue:\n* [http://jira.codehaus.org/browse/JRUBY-2040 JRUBY-2040: new samples/jnlp dir: includes both unsigned and signed examples that work in Java 1.5 and 1.6]\nincludes an attachment which when extracted in samples/ adds s both unsigned and signed examples that work in Java 1.5 and 1.6. It is projected to be included in JRUBY 1.1 RC2.\n\n===JAR Signing===\nIf you're getting an <tt>java.securityAccessControlException</tt> with the message <tt>access denied (java.lang.RuntimePermission accessDeclaredMembers)</tt> on startup or when running your JRuby application, then you'll need to sign your jar. The whole process is described \n[http://java.sun.com/products/javawebstart/1.2/docs/developersguide.html#dev here], under \"Signing JAR Files with a Test Certificate\". You basically have to perform the following steps:\n\n keytool -genkey -keystore myKeystore -alias myself\n keytool -selfcert -alias myself -keystore myKeystore\n\nYou also need to include to following lines in your jnlp-file:\n &lt;security&gt; \n   &lt;all-permissions/&gt; \n &lt;/security&gt;\n\nAnd whenever you modify the jar, you need to do an\n\n jarsigner -keystore myKeystore test.jar myself\n\nto update the signature.\n\n===Disabling the Security Manager===\nIf you have a signed jar and the startup fails because of an <tt>java.lang.reflect.ReflectPermission</tt> or you continue to have <tt>access denied (java.lang.RuntimePermission accessDeclaredMembers)</tt> errors, you can just disable the security manager:\n\nJRuby:\n java.lang.System.setSecurityManager(nil)\nJava:\n System.setSecurityManager(null);\nDisclaimer: I'm not an expert on Java Security, so I don't know if disabling the Security Manager has unintended sideeffects. [[User:Mstocker|Mstocker]] 10:49, 30 December 2007 (PST)\n\nSee: [http://jira.codehaus.org/browse/JRUBY-1821/ JRUBY-1821] and [http://jira.codehaus.org/browse/JRUBY-1782/ JRUBY-1782].\n","created_at":"2009-03-21T20:23:28Z","content_type":"application/vnd.com.kenai.page.revision+json"}